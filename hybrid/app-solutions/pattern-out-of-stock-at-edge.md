---
title: Fehlbestandserkennung mit Azure und Azure Stack Edge
description: Hier erfahren Sie, wie Sie Azure- und Azure Stack Edge-Dienste verwenden, um eine Fehlbestandserkennung zu implementieren.
author: BryanLa
ms.topic: article
ms.date: 05/24/2021
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 05/24/2021
ms.openlocfilehash: b25a6391c4e64fa7018031bac4fb7d098c56b529
ms.sourcegitcommit: cf2c4033d1b169f5b63980ce1865281366905e2e
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/25/2021
ms.locfileid: "110343874"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="27d5f-103">Muster zur Fehlbestandserkennung im Edge-Bereich</span><span class="sxs-lookup"><span data-stu-id="27d5f-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="27d5f-104">Dieses Muster veranschaulicht, wie Sie mit einem Azure Stack Edge- oder Azure IoT Edge-Gerät und Netzwerkkameras feststellen können, ob Regale Fehlbestände aufweisen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="27d5f-105">Kontext und Problem</span><span class="sxs-lookup"><span data-stu-id="27d5f-105">Context and problem</span></span>

<span data-ttu-id="27d5f-106">Stationäre Einzelhandelsgeschäfte verlieren Umsatz, sobald Kunden, die einen Artikel suchen, diesen nicht im Regal finden.</span><span class="sxs-lookup"><span data-stu-id="27d5f-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="27d5f-107">Der Artikel kann sich jedoch im hinteren Teil des Geschäfts befinden und nicht wieder aufgefüllt worden sein.</span><span class="sxs-lookup"><span data-stu-id="27d5f-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="27d5f-108">Geschäfte möchten ihr Personal effizienter einsetzen und automatisch benachrichtigt werden, wenn Artikel wieder aufgefüllt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="27d5f-109">Lösung</span><span class="sxs-lookup"><span data-stu-id="27d5f-109">Solution</span></span>

<span data-ttu-id="27d5f-110">Im Lösungsbeispiel wird ein Edgegerät, wie beispielsweise Azure Stack Edge, in jedem Geschäft verwendet, das Daten von Kameras im Geschäft effizient verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="27d5f-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="27d5f-111">Dieses optimierte Design ermöglicht es Händlern, nur relevante Ereignisse und Bilder in die Cloud zu senden.</span><span class="sxs-lookup"><span data-stu-id="27d5f-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="27d5f-112">Das Design spart Bandbreite und Speicherplatz und stellt den Schutz von Kundendaten sicher.</span><span class="sxs-lookup"><span data-stu-id="27d5f-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="27d5f-113">Während Frames von jeder Kamera gelesen werden, verarbeitet ein ML-Modell das Bild und gibt alle Bereiche mit Fehlbeständen zurück.</span><span class="sxs-lookup"><span data-stu-id="27d5f-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="27d5f-114">Das Bild und die Bereiche mit Fehlbeständen werden in einer lokalen Web-App angezeigt.</span><span class="sxs-lookup"><span data-stu-id="27d5f-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="27d5f-115">Diese Daten können an eine Time Series Insight-Umgebung gesendet werden, um in Power BI Erkenntnisse anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Architektur einer Edge-Lösung zum Erkennen von Fehlbeständen](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="27d5f-117">Die Lösung funktioniert so:</span><span class="sxs-lookup"><span data-stu-id="27d5f-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="27d5f-118">Bilder werden von einer Netzwerkkamera über HTTP oder RTSP aufgenommen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="27d5f-119">Die Größe des Bilds wird geändert und zum Rückschlusstreiber gesendet, der mit dem ML-Modell kommuniziert, um festzustellen, ob es Bilder zu einem Fehlbestand gibt.</span><span class="sxs-lookup"><span data-stu-id="27d5f-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="27d5f-120">Das ML-Modell gibt alle Bereiche mit Fehlbeständen zurück.</span><span class="sxs-lookup"><span data-stu-id="27d5f-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="27d5f-121">Der Rückschlusstreiber lädt das unbearbeitete Bild in ein Blob hoch (sofern angegeben) und sendet die Ergebnisse aus dem Modell an Azure IoT Hub und einen Begrenzungsrahmenprozessor auf dem Gerät.</span><span class="sxs-lookup"><span data-stu-id="27d5f-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="27d5f-122">Der Begrenzungsrahmenprozessor fügt dem Bild Begrenzungsrahmen hinzu und speichert den Bildpfad in einer In-Memory Database.</span><span class="sxs-lookup"><span data-stu-id="27d5f-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="27d5f-123">Die Web-App fragt Bildern ab und zeigt sie in der Reihenfolge des Empfangs.</span><span class="sxs-lookup"><span data-stu-id="27d5f-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="27d5f-124">Nachrichten von IoT Hub werden in Time Series Insights aggregiert.</span><span class="sxs-lookup"><span data-stu-id="27d5f-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="27d5f-125">Power BI zeigt einen interaktiven Bericht zu Artikeln mit Fehlbeständen im Zeitverlauf mit den Daten aus Time Series Insights an.</span><span class="sxs-lookup"><span data-stu-id="27d5f-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="27d5f-126">Komponenten</span><span class="sxs-lookup"><span data-stu-id="27d5f-126">Components</span></span>

<span data-ttu-id="27d5f-127">Diese Lösung verwendet die folgenden Komponenten:</span><span class="sxs-lookup"><span data-stu-id="27d5f-127">This solution uses the following components:</span></span>

| <span data-ttu-id="27d5f-128">Ebene</span><span class="sxs-lookup"><span data-stu-id="27d5f-128">Layer</span></span> | <span data-ttu-id="27d5f-129">Komponente</span><span class="sxs-lookup"><span data-stu-id="27d5f-129">Component</span></span> | <span data-ttu-id="27d5f-130">BESCHREIBUNG</span><span class="sxs-lookup"><span data-stu-id="27d5f-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="27d5f-131">Lokale Hardware</span><span class="sxs-lookup"><span data-stu-id="27d5f-131">On-premises hardware</span></span> | <span data-ttu-id="27d5f-132">Netzwerkkamera</span><span class="sxs-lookup"><span data-stu-id="27d5f-132">Network camera</span></span> | <span data-ttu-id="27d5f-133">Eine Netzwerkkamera mit HTTP- oder RTSP-Feed ist erforderlich, um die Bilder für Rückschlüsse zu liefern.</span><span class="sxs-lookup"><span data-stu-id="27d5f-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="27d5f-134">Azure</span><span class="sxs-lookup"><span data-stu-id="27d5f-134">Azure</span></span> | <span data-ttu-id="27d5f-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="27d5f-135">Azure IoT Hub</span></span> | <span data-ttu-id="27d5f-136">[Azure IoT Hub](/azure/iot-hub/) kümmert sich um die Gerätebereitstellung und das Messaging für die Edgegeräte.</span><span class="sxs-lookup"><span data-stu-id="27d5f-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="27d5f-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="27d5f-137">Azure Time Series Insights</span></span> | <span data-ttu-id="27d5f-138">[Azure Time Series Insights](/azure/time-series-insights/) speichert die Nachrichten von IoT Hub für die Visualisierung.</span><span class="sxs-lookup"><span data-stu-id="27d5f-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="27d5f-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="27d5f-139">Power BI</span></span> | <span data-ttu-id="27d5f-140">[Microsoft Power BI](https://powerbi.microsoft.com/) bietet geschäftsorientierte Berichte zu Fehlbestandsereignissen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="27d5f-141">Power BI bietet eine benutzerfreundliche Dashboardschnittstelle zur Anzeige der Ausgabe von Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="27d5f-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="27d5f-142">Azure Stack Edge oder</span><span class="sxs-lookup"><span data-stu-id="27d5f-142">Azure Stack Edge or</span></span><br><span data-ttu-id="27d5f-143">Azure IoT Edge-Gerät</span><span class="sxs-lookup"><span data-stu-id="27d5f-143">Azure IoT Edge device</span></span> | <span data-ttu-id="27d5f-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="27d5f-144">Azure IoT Edge</span></span> | <span data-ttu-id="27d5f-145">[Azure IoT Edge](/azure/iot-edge/) orchestriert die Laufzeit für die lokalen Container und übernimmt die Verwaltung und Aktualisierung von Geräten.</span><span class="sxs-lookup"><span data-stu-id="27d5f-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="27d5f-146">Project Brainwave für Azure</span><span class="sxs-lookup"><span data-stu-id="27d5f-146">Azure project brainwave</span></span> | <span data-ttu-id="27d5f-147">Auf einem Azure Stack Edge-Gerät verwendet [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) FPGAs (Field-Programmable Gate Arrays) zum Beschleunigen von ML-Rückschlüssen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="27d5f-148">Probleme und Überlegungen</span><span class="sxs-lookup"><span data-stu-id="27d5f-148">Issues and considerations</span></span>

<span data-ttu-id="27d5f-149">Beachten Sie die folgenden Punkte bei der Entscheidung, wie diese Lösung implementiert werden soll:</span><span class="sxs-lookup"><span data-stu-id="27d5f-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="27d5f-150">Skalierbarkeit</span><span class="sxs-lookup"><span data-stu-id="27d5f-150">Scalability</span></span>

<span data-ttu-id="27d5f-151">Die meisten Machine Learning-Modelle können abhängig von der bereitgestellten Hardware nur mit einer bestimmten Anzahl von Frames pro Sekunde ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="27d5f-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="27d5f-152">Bestimmen Sie die optimale Abtastrate Ihrer Kamera(s), um sicherzustellen, dass es in der ML-Pipeline nicht zu Staus kommt.</span><span class="sxs-lookup"><span data-stu-id="27d5f-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="27d5f-153">Verschiedene Arten von Hardware verarbeiten unterschiedliche Anzahlen von Kameras und Frameraten.</span><span class="sxs-lookup"><span data-stu-id="27d5f-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="27d5f-154">Verfügbarkeit</span><span class="sxs-lookup"><span data-stu-id="27d5f-154">Availability</span></span>

<span data-ttu-id="27d5f-155">Wichtig ist zu bedenken, was passieren kann, wenn die Verbindung mit dem Edgegerät unterbrochen wird.</span><span class="sxs-lookup"><span data-stu-id="27d5f-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="27d5f-156">Berücksichtigen Sie, welche Daten im Time Series Insights- und Power BI-Dashboard verloren gehen könnten.</span><span class="sxs-lookup"><span data-stu-id="27d5f-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="27d5f-157">Die vorliegende Beispiellösung ist nicht auf Hochverfügbarkeit ausgelegt.</span><span class="sxs-lookup"><span data-stu-id="27d5f-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="27d5f-158">Verwaltbarkeit</span><span class="sxs-lookup"><span data-stu-id="27d5f-158">Manageability</span></span>

<span data-ttu-id="27d5f-159">Diese Lösung kann eine Vielzahl von Geräten und Standorten umfassen und damit recht unhandlich werden.</span><span class="sxs-lookup"><span data-stu-id="27d5f-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="27d5f-160">Mit den IoT-Diensten von Azure können neue Standorte und Geräte automatisch online geschaltet und auf dem neuesten Stand gehalten werden.</span><span class="sxs-lookup"><span data-stu-id="27d5f-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="27d5f-161">Zudem sind die ordnungsgemäßen Verfahren für Datengovernance zu befolgen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="27d5f-162">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="27d5f-162">Security</span></span>

<span data-ttu-id="27d5f-163">Von diesem Muster werden potenziell vertrauliche Daten verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="27d5f-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="27d5f-164">Stellen Sie sicher, dass die Schlüssel regelmäßig rotiert werden und die Berechtigungen für das Azure Storage-Konto und die lokalen Freigaben ordnungsgemäß zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="27d5f-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="27d5f-165">Nächste Schritte</span><span class="sxs-lookup"><span data-stu-id="27d5f-165">Next steps</span></span>

<span data-ttu-id="27d5f-166">Weitere Informationen zu den in diesem Artikel behandelten Themen:</span><span class="sxs-lookup"><span data-stu-id="27d5f-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="27d5f-167">In diesem Muster werden mehrere IoT-bezogene Dienste genutzt, darunter [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/) und [Azure Time Series Insights](/azure/time-series-insights/).</span><span class="sxs-lookup"><span data-stu-id="27d5f-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="27d5f-168">Weitere Informationen zu Microsoft Project Brainwave finden Sie in [der Ankündigung im Blog](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) und im [Video zu Azure Accelerated Machine Learning mit Project Brainwave](https://www.youtube.com/watch?v=DJfMobMjCX0).</span><span class="sxs-lookup"><span data-stu-id="27d5f-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="27d5f-169">Unter [Überlegungen zum Entwurf von Hybrid-Apps](overview-app-design-considerations.md) erfahren Sie mehr zu bewährten Methoden und erhalten Antworten auf weitere Fragen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="27d5f-170">Im Artikel zur [Azure Stack-Familie mit Produkten und Lösungen](/azure-stack) erfahren Sie mehr über das gesamte Portfolio von Produkten und Lösungen.</span><span class="sxs-lookup"><span data-stu-id="27d5f-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="27d5f-171">Wenn Sie bereit sind, das Lösungsbeispiel zu testen, fahren Sie mit dem [Bereitstellungsleitfaden für die Edge-ML-Rückschlusslösung](https://aka.ms/edgeinferencingdeploy) fort.</span><span class="sxs-lookup"><span data-stu-id="27d5f-171">When you're ready to test the solution example, continue with the [Edge ML inferencing solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="27d5f-172">In diesem Bereitstellungsleitfaden finden Sie detaillierte Anweisungen zum Bereitstellen und Testen der zugehörigen Komponenten.</span><span class="sxs-lookup"><span data-stu-id="27d5f-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
